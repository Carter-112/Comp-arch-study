<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Interactive Quiz</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="quiz-container">
    <h1>Quiz</h1>
    <div id="question"></div>
    <div id="options"></div>
    <div id="controls">
      <button id="prev-btn" disabled>Previous</button>
      <button id="submit-btn" disabled>Submit</button>
      <button id="next-btn" disabled>Next</button>
    </div>
  </div>  <script>
    (async function() {
      const raw = await fetch('quiz.txt').then(r => r.text());
      const [qBlock, aBlock] = raw.split('Answer Key');
      const questionLines = qBlock.trim().split('\n\n');
      const answerLines = aBlock.trim().split('\n');
      const answers = {};
      answerLines.forEach(line => {
        const [num, ans] = line.split('.');
        answers[+num.trim()] = ans.trim();
      });

      const questions = questionLines.map(block => {
        const lines = block.split('\n');
        const header = lines.shift();
        const [, text] = header.match(/^\s*\d+\.\s*(.+)$/);
        const opts = lines.map(l => {
          const letter = l[0];
          const content = l.slice(3);
          return { letter, content };
        });
        const num = +header.match(/^\s*(\d+)\./)[1];
        return { num, text, opts };
      });

      let idx = 0;
      let correctCount = 0;
      const qEl = document.getElementById('question');
      const oEl = document.getElementById('options');
      const prevBtn = document.getElementById('prev-btn');
      const submitBtn = document.getElementById('submit-btn');
      const nextBtn = document.getElementById('next-btn');

      function showQuestion() {
        // reset UI
        submitBtn.disabled = true;
        nextBtn.disabled = true;
        oEl.innerHTML = '';
        const q = questions[idx];
        qEl.textContent = `${q.num}. ${q.text}`;
        q.opts.forEach(o => {
          const div = document.createElement('div');
          div.className = 'option';
          div.textContent = `${o.letter}. ${o.content}`;
          div.addEventListener('click', () => selectOption(div, o.letter));
          oEl.appendChild(div);
        });
        prevBtn.disabled = idx === 0;
      }

      function selectOption(el, letter) {
        // clear any previous selection
        [...oEl.children].forEach(d => d.classList.remove('selected'));
        el.classList.add('selected');
        submitBtn.disabled = false;
      }

      function submitAnswer() {
        const selectedEl = [...oEl.children].find(d => d.classList.contains('selected'));
        if (!selectedEl) return;
        const letter = selectedEl.textContent.charAt(0);
        const correct = answers[questions[idx].num];
        if (letter === correct) {
          selectedEl.classList.add('correct');
          correctCount++;
        } else {
          selectedEl.classList.add('wrong');
          [...oEl.children]
            .find(d => d.textContent.startsWith(correct + '.'))
            .classList.add('correct');
        }
        submitBtn.disabled = true;
        nextBtn.disabled = false;
      }

      prevBtn.addEventListener('click', () => {
        if (idx > 0) {
          idx--;
          showQuestion();
        }
      });

      submitBtn.addEventListener('click', submitAnswer);

      nextBtn.addEventListener('click', () => {
        idx++;
        if (idx < questions.length) {
          showQuestion();
        } else {
          document.getElementById('quiz-container').innerHTML =
            `<h1>Quiz Complete!</h1>
             <p>You answered <strong>${correctCount}</strong> out of <strong>${questions.length}</strong> correctly.</p>`;
        }
      });

      showQuestion();
    })();
  </script></body>
</html>
